<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Masking # Image processing # Shortcuts # Key Action t toggle kernel s Lightness visualization (change mode) Code # Image processing app&rsquo;s code var stateR; var stateG; var stateB; var red_arr = new Array(256); var green_arr = new Array(256); var blue_arr = new Array(256); var showFilter = false; const filter = [ [-2, -1, 0], [-1, 1, 1], [0, 1, 2], ]; const filter2 = [ [-1, 0, 1], [-1, 0, 1], [-1, 0, 1], ]; var colors = new Array(3); var leftM = 30; var upM = 15; function preload() { img = loadImage(&#34;/Talleres/sketches/taller1/assets/turquia."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Masking # Image processing # Shortcuts # Key Action t toggle kernel s Lightness visualization (change mode) Code # Image processing app&rsquo;s code var stateR; var stateG; var stateB; var red_arr = new Array(256); var green_arr = new Array(256); var blue_arr = new Array(256); var showFilter = false; const filter = [ [-2, -1, 0], [-1, 1, 1], [0, 1, 2], ]; const filter2 = [ [-1, 0, 1], [-1, 0, 1], [-1, 0, 1], ]; var colors = new Array(3); var leftM = 30; var upM = 15; function preload() { img = loadImage(&#34;/Talleres/sketches/taller1/assets/turquia."><meta property="og:type" content="article"><meta property="og:url" content="https://visual-computing-2022-2.github.io/Talleres/docs/Workshop/workshop_1/masking/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-09-04T22:26:56-05:00"><title>Masking | Visual Computing</title><link rel=manifest href=/Talleres/manifest.json><link rel=icon href=/Talleres/favicon.png type=image/x-icon><link rel=stylesheet href=/Talleres/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/Talleres/flexsearch.min.js></script>
<script defer src=/Talleres/en.search.min.3651f6bc29649cdbf6b27b52ab11cab3df8703a4fe847f412c58acfcfb7ba200.js integrity="sha256-NlH2vClknNv2sntSqxHKs9+HA6T+hH9BLFis/Pt7ogA=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/Talleres/><span>Visual Computing</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Workshop</span><ul><li><input type=checkbox id=section-8d2b6a08245086db5d9347a14c60b971 class=toggle checked>
<label for=section-8d2b6a08245086db5d9347a14c60b971 class="flex justify-between"><a href=/Talleres/docs/Workshop/workshop_1/>Workshop 1</a></label><ul><li><a href=/Talleres/docs/Workshop/workshop_1/masking/ class=active>Masking</a></li><li><input type=checkbox id=section-2aa212ced681e7ddb472ce2ea2174f76 class=toggle>
<label for=section-2aa212ced681e7ddb472ce2ea2174f76 class="flex justify-between"><a href=/Talleres/docs/Workshop/workshop_1/visual_ilussion/>Visual Ilussion</a></label><ul><li><a href=/Talleres/docs/Workshop/workshop_1/visual_ilussion/frisensLazyShadow/>Frisens Lazy Shadow</a></li><li><a href=/Talleres/docs/Workshop/workshop_1/visual_ilussion/jastrowIllusion/>Jastrow Illusion</a></li><li><a href=/Talleres/docs/Workshop/workshop_1/visual_ilussion/kinegramScanimation/>Kinegram Scanimation</a></li><li><a href=/Talleres/docs/Workshop/workshop_1/visual_ilussion/steppingFeetMotionIllusion/>Stepping Feet Motion Illusion</a></li></ul></li></ul></li></ul></li></ul><ul><li><a href=/Talleres/posts/>Blog</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/Talleres/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Masking</strong>
<label for=toc-control><img src=/Talleres/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#masking>Masking</a><ul><li><a href=#image-processing>Image processing</a><ul><li></li></ul></li><li><a href=#code>Code</a></li></ul></li><li><a href=#image-kernels>Image Kernels</a><ul><li><a href=#problem-statement>Problem Statement</a></li><li><a href=#background>Background</a></li><li><a href=#results>Results</a></li><li><a href=#conclusions--future-work>Conclusions & Future Work</a></li></ul></li><li><a href=#image-histogram>Image histogram</a><ul><li><a href=#problem-statement-1>Problem Statement</a></li><li><a href=#background-1>Background</a></li><li><a href=#results-1>Results</a></li><li><a href=#conclusions--future-work-1>Conclusions & Future Work</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=masking>Masking
<a class=anchor href=#masking>#</a></h1><h2 id=image-processing>Image processing
<a class=anchor href=#image-processing>#</a></h2><h4 id=shortcuts>Shortcuts
<a class=anchor href=#shortcuts>#</a></h4><table><thead><tr><th>Key</th><th>Action</th></tr></thead><tbody><tr><td>t</td><td>toggle kernel</td></tr><tr><td>s</td><td>Lightness visualization (change mode)</td></tr></tbody></table><iframe id=histogram style=width:780px;height:1000px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/Talleres/sketches/taller1/histogram.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=code>Code
<a class=anchor href=#code>#</a></h2><details><summary>Image processing app&rsquo;s code</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>stateR</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>stateG</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>stateB</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>red_arr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>green_arr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>blue_arr</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>256</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>showFilter</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>filter</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  [<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>  [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>  [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>],
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>filter2</span> <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>  [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>  [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>  [<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>colors</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Array(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>15</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#34;/Talleres/sketches/taller1/assets/turquia.jpg&#34;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getIndex</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(255,0,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,255,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,0,255,0.1)&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>256</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>red_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// img.filter(GRAY);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtered</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createImage</span>(<span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>, <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>idx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getIndex</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>red_arr</span>[<span style=color:#a6e22e>r</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>green_arr</span>[<span style=color:#a6e22e>g</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>blue_arr</span>[<span style=color:#a6e22e>b</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#75715e>//kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>filteredPixel</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>convolute</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>filteredPixel</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>filteredPixel</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>filteredPixel</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>alpha</span>(<span style=color:#a6e22e>filteredPixel</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>red_arr</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green_arr</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue_arr</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>calculateHistogram</span>(<span style=color:#a6e22e>imagen</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(255,0,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,255,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,0,255,0.1)&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>256</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>red_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue_arr</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// img.filter(GRAY);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>filtered</span>.<span style=color:#a6e22e>loadPixels</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>width</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>height</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>idx</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getIndex</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>idx</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3</span>];
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>red_arr</span>[<span style=color:#a6e22e>r</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>green_arr</span>[<span style=color:#a6e22e>g</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>blue_arr</span>[<span style=color:#a6e22e>b</span>]<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>red_arr</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green_arr</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue_arr</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>imagen</span>.<span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>updatePixels</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>mousePressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mouseX</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>mouseX</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>70</span>) <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(255,0,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,255,0,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stateB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,0,255,0.1)&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>40</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stateR</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(255,0,0,1)&#39;</span>)
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>50</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>50</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stateG</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,255,0,1)&#39;</span>)
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>100</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>stateB</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,0,255,1)&#39;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>220</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>//image(img, leftM, upM);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>showFilter</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>filtered</span>, <span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>upM</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>img</span>, <span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>upM</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rect</span>(<span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>, <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rect</span>(<span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>255</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rect</span>(<span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateR</span>.<span style=color:#a6e22e>toString</span>() <span style=color:#f92672>==</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(255,0,0,1)&#39;</span>).<span style=color:#a6e22e>toString</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateG</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateB</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateR</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stateG</span>.<span style=color:#a6e22e>toString</span>() <span style=color:#f92672>==</span> <span style=color:#a6e22e>color</span>(<span style=color:#e6db74>&#39;rgba(0,255,0,1)&#39;</span>).<span style=color:#a6e22e>toString</span>()) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateR</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateB</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateG</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateR</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateG</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>stateB</span>, <span style=color:#a6e22e>colors</span>[<span style=color:#ae81ff>2</span>]);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>graph</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>graph</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>drawArrow</span>(<span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>leftM</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>), <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>), <span style=color:#e6db74>&#39;x&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>drawArrow</span>(<span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>leftM</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>), <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>upM</span>), <span style=color:#e6db74>&#39;y&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textAlign</span>(<span style=color:#a6e22e>CENTER</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textSize</span>(<span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#39;Valores del color (0 - 255) &#39;</span>, <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>upM</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>angle2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>radians</span>(<span style=color:#ae81ff>270</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>leftM</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, (<span style=color:#ae81ff>3</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>rotate</span>(<span style=color:#a6e22e>angle2</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Draw the letter to the screen
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;Frecuencias&#34;</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>paint</span>(<span style=color:#a6e22e>state</span>, <span style=color:#a6e22e>array</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#a6e22e>state</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>256</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xPos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>i</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>256</span>, <span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>xPrev</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>256</span>, <span style=color:#a6e22e>leftM</span>, <span style=color:#a6e22e>leftM</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>width</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>yPos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>array</span>[<span style=color:#a6e22e>i</span>], <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>array</span>), <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>, <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>25</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>yPrev</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>array</span>[<span style=color:#a6e22e>i</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>], <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>max</span>(<span style=color:#a6e22e>array</span>), <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>, <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>25</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>xPrev</span>, <span style=color:#a6e22e>yPrev</span>, <span style=color:#a6e22e>xPos</span>, <span style=color:#a6e22e>yPos</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>xPos</span>, <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>height</span>, <span style=color:#a6e22e>xPos</span>, <span style=color:#a6e22e>yPos</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>drawArrow</span>(<span style=color:#a6e22e>base</span>, <span style=color:#a6e22e>vec</span>, <span style=color:#a6e22e>axis</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>line</span>(<span style=color:#a6e22e>base</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>base</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>arrowSize</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>axis</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;x&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>triangle</span>(<span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>arrowSize</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>arrowSize</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>arrowSize</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>7</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>triangle</span>(<span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>arrowSize</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>arrowSize</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>vec</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>arrowSize</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>convolute</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sumR</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sumG</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sumB</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pix</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>getIndex</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>j</span>);
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>factor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>filter</span>[<span style=color:#a6e22e>j</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>][<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sumR</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>pix</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>factor</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sumG</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>pix</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>factor</span>;
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>sumB</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>img</span>.<span style=color:#a6e22e>pixels</span>[<span style=color:#a6e22e>pix</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>] <span style=color:#f92672>*</span> <span style=color:#a6e22e>factor</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>color</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sumR</span>, <span style=color:#a6e22e>sumG</span>, <span style=color:#a6e22e>sumB</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>keyPressed</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>keyCode</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>84</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>showFilter</span> <span style=color:#f92672>=</span> <span style=color:#f92672>!</span><span style=color:#a6e22e>showFilter</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>showFilter</span>)
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>calculateHistogram</span>(<span style=color:#a6e22e>filtered</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>calculateHistogram</span>(<span style=color:#a6e22e>img</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div></div></details><h1 id=image-kernels>Image Kernels
<a class=anchor href=#image-kernels>#</a></h1><h2 id=problem-statement>Problem Statement
<a class=anchor href=#problem-statement>#</a></h2><p>Implement an image processing web app supporting different <a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>image kernels</a>.</p><h2 id=background>Background
<a class=anchor href=#background>#</a></h2><p>The use of Kernels also known as convolution matrices or masks is invaluable to image processing. Techniques such as blurring, edge detection, and sharpening all rely on kernels - small matrices of numbers to be applied across an image in order to process the image as a whole.</p><p>They&rsquo;re also used in machine learning for &lsquo;feature extraction&rsquo;, a technique for determining the most important portions of an image. In this context the process is referred to more generally as &ldquo;convolution&rdquo; (see: <a href=https://en.wikipedia.org/wiki/Convolutional_neural_network>convolutional neural networks</a>.)</p><h2 id=results>Results
<a class=anchor href=#results>#</a></h2><p>We implemented the convolutional layer by defining a 3x3 matrix in which the filter was defined, then we just iterated through each pixel in the image and calculated a new filtered pixel by adding each of its neighbors weighted with the kernel matrix. Edge pixels were ignored as they don&rsquo;t have the 8 corresponding neighbors.</p><h2 id=conclusions--future-work>Conclusions & Future Work
<a class=anchor href=#conclusions--future-work>#</a></h2><p>This method may not be the most efficient to implement this kind of filtering process, using parallel computing may be faster. But as an educative example it&rsquo;s pretty effective and illustrative. We use this kind of filters in our daily lives wihtout even knowing it (until we learned about it), it&rsquo;s used in processing image software (such as photoshop or gimp) and the social media networks we often use. As a future work, it&rsquo;d be interesting to know how to generate (or approximate) a kernel matrix to achieve a desired filter, also to learn how to implement this by using parallel computing and implement some video filtering.</p><h1 id=image-histogram>Image histogram
<a class=anchor href=#image-histogram>#</a></h1><h2 id=problem-statement-1>Problem Statement
<a class=anchor href=#problem-statement-1>#</a></h2><p>Implement <a href=https://en.wikipedia.org/wiki/Image_histogram>Image histogram</a> visualization.</p><h2 id=background-1>Background
<a class=anchor href=#background-1>#</a></h2><p>The histogram of a digital image depicts how the intensities of its pixels are distributed. It is the discrete function h such that</p><link rel=stylesheet href=/Talleres/katex/katex.min.css><script defer src=/Talleres/katex/katex.min.js></script>
<script defer src=/Talleres/katex/auto-render.min.js onload=renderMathInElement(document.body)></script><span>
\[ h(x) = n_i \]</span><p>where<span>
\(n_i \)</span>
is the number of pixels with intensity <span>\(i \)</span>
.</p><p>Histograms are used to quickly analyze the composition of an image, it can be used in RGB composition, gray scale, brightness or the system that best suits our needs.</p><p>The pixel values are processed individually, an aggregate is made for each value and the searched histogram is plotted</p><h2 id=results-1>Results
<a class=anchor href=#results-1>#</a></h2><p>As we can see, the histogram of an image is made from its RGB color scalar, for this we analyze each pixel and see how much it contains of each value, which is a value between 0 and 255, then we make the graph by mapping the respective values that allow highlighting the composition of the image.</p><p>On the x axis we have the represents the variations of the tone, and on the y axis the quantities that appear in the pixels of the image</p><h2 id=conclusions--future-work-1>Conclusions & Future Work
<a class=anchor href=#conclusions--future-work-1>#</a></h2><p>Knowing how to create and read an image histogram is a very powerful tool that allows people who work with graphics and everything related to visual computing to quickly analyze an image, it is recommended to have a clear base with what type of color composition according to our objective, so that our graphs agree with the applications of the project. It&rsquo;s also very useful for photographers which use this histograms to know if a photo they took is well exposed or not, by checking if the vast amount of color is either in the left zone of the histogram (meaning the image is underexposed ) or to the right zone (meaning it&rsquo;s overexposed)</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/Visual-Computing-2022-2/Talleres/commit/f2b9b29290c1b1c2d218e320b37e9ae779028f4f title='Last modified by NicolasV | September 5, 2022' target=_blank rel=noopener><img src=/Talleres/svg/calendar.svg class=book-icon alt=Calendar>
<span>September 5, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#masking>Masking</a><ul><li><a href=#image-processing>Image processing</a><ul><li></li></ul></li><li><a href=#code>Code</a></li></ul></li><li><a href=#image-kernels>Image Kernels</a><ul><li><a href=#problem-statement>Problem Statement</a></li><li><a href=#background>Background</a></li><li><a href=#results>Results</a></li><li><a href=#conclusions--future-work>Conclusions & Future Work</a></li></ul></li><li><a href=#image-histogram>Image histogram</a><ul><li><a href=#problem-statement-1>Problem Statement</a></li><li><a href=#background-1>Background</a></li><li><a href=#results-1>Results</a></li><li><a href=#conclusions--future-work-1>Conclusions & Future Work</a></li></ul></li></ul></nav></div></aside></main></body></html>